<!DOCTYPE html>
<html lang="zh">
    <head><meta name="generator" content="Hexo 3.9.0">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.3 -->

    <!-- Title -->
    
    <title>
        
            函数节流与函数防抖 | 
        
        BluedWeb
    </title>

    <!-- Meta & Info -->
    <meta charset="utf-8">

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    

    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Blued">
    <meta name="description" content>
    <meta name="keywords" content=",JavaScript">

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.ico">
    <link rel="icon" sizes="192x192" href="/img/favicon.ico">
    <link rel="apple-touch-icon" href="/img/favicon.ico">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="BluedWeb">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://web.blued.cn">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="函数节流与函数防抖 | BluedWeb">
    <meta property="og:description" content>
    <meta property="og:article:tag" content="JavaScript"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", SimSun, sans-serif;;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

  #post-content pre {
    background: #272822;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    


    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism-okaidia.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#函数节流（throttle）"><span class="post-toc-number">1.</span> <span class="post-toc-text">函数节流（throttle）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#类似的实际生活中的场景"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">类似的实际生活中的场景</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在程序中的实践"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">在程序中的实践</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通用的函数节流实现"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">通用的函数节流实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#类似函数节流的操作"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">类似函数节流的操作</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#函数防抖（debounce）"><span class="post-toc-number">2.</span> <span class="post-toc-text">函数防抖（debounce）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实际的例子"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">实际的例子</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在程序中的实践-1"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">在程序中的实践</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#监听窗口大小重绘的操作。"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">监听窗口大小重绘的操作。</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#输入框的输入联想"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">输入框的输入联想</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通用的函数防抖实现"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">通用的函数防抖实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#类似函数防抖的操作"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">类似函数防抖的操作</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#总结"><span class="post-toc-number">3.</span> <span class="post-toc-text">总结</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考资料"><span class="post-toc-number">4.</span> <span class="post-toc-text">参考资料</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
  <!-- Paradox Post Header -->
  
    
      <!-- Random Thumbnail -->
      <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50" data-original="">
        <script>
  var randomNum = Math.floor(Math.random() * 19 + 1);

  if (!$('.post_thumbnail-random').attr('data-original')) {
    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
  }
  $('.post_thumbnail-random').addClass('lazy');
</script>

      
      
        <p class="article-headline-p">
          函数节流与函数防抖
        </p>
      </div>
    

    


                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

  <!-- Author Avatar -->
  <div id="author-avatar">
    <img src="https://avatars1.githubusercontent.com/u/9568094?v=4" width="44px" height="44px" alt="Author Avatar"/>
  </div>
  <!-- Author Name & Date -->
  <div>
    <strong>
      <a href="https://github.com/Jiasm">jiasm</a>
    </strong>
    <span>3月 10, 2018</span>
  </div>

  <div class="section-spacer"></div>

  <!-- Favorite -->
  <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

  <!-- Qrcode -->
  
    <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
      <i class="material-icons" role="presentation">devices other</i>
      <span class="visuallyhidden">devices other</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
      <li class="mdl-menu__item">在其它设备中阅读本文章</li>
      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAAC40lEQVR42u3aS3LbMBAFQN3/0sk2VY6o9wDGZgaNlcpigWhoMZ7P69eR64WNjY2NjY2NjY39SPYrXn/Z6I+/X3/+us/XPd+95d172zNjY2Njz2Ynr7l+8f5u11d2w5mxsbGxD2AnmPzQ746eB8j2aj6cBBsbGxs7CCptcnKdZuQXjY2NjY29w94HRyWhpwUwbGxs7Eeyd9KABJCU8vNnvrWWho2Njf14dt40fc7nb+1vY2NjYz+Y3a62+domHkmasXhybGxs7KHsNg3Ii/g/m9JgY2Njn8NOQs51+MmHddqLaEeCPrSQsbGxsYey2+JR8m2bkCTnuWGoCBsbG3soey0Y5GlJPoizHz6LkR1sbGzsQey7Skjt0GSSluQnuSFuY2NjY//n7PYK6oJOGZZ2Ql1RVMLGxsYewW5LPGsDNGuXtdYGLhq92NjY2IPYeWBoR2fyMlBekGpbyNjY2NjnsPeHLNeCU75DO76DjY2NfQK7DVdr37Y7tAWpJLBhY2NjT2Unxfe2ZN8W+pPyVluiiuI2NjY29jh220zNB3QWDxokHsXz2NjY2KPZ+UHbxkBS7mmbwWvtZ2xsbOyp7LXy/X6YqYv75XuxsbGxz2HnR2kbsUkbuA1d7W7Y2NjYJ7Dbccn2cG0DIG851GOd2NjY2Iex21GbvNzfFoySS6zbA9jY2NiHsYvCzU2Bbe3K6loaNjY29iD2vWEmb+W2LeH854kCGDY2NvY49tqmbaKyFj7zYImNjY2NvVaIb0d/2vD2T9oD2NjY2CPY7cqThLx53Aa5tcEdbGxs7KnsNjy04adtOeSFpzqIYmNjY49mt6Q22LTt2zyZuSEDw8bGxh7ETv6t32nurmF2FjY2NjZ2Xqxvg0pS4m+f/JDkYGNjY2NvjNS0AzptSStKk7CxsbEPYOcJQ3tBa+2HpOWw1ejFxsbGHsTOj7UzZFM0ZW8aAMLGxsY+gX3OwsbGxsbGxsbGxn7M+g30+Fz/9NVI1wAAAABJRU5ErkJggg==">
    </ul>
  

  <!-- Tags (bookmark) -->
  
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
      <i class="material-icons" role="presentation">bookmark</i>
      <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
      <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/JavaScript/">JavaScript</a>
    </ul>
  

  <!-- Share -->
  <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <blockquote>
<p>函数节流和函数防抖是一个老生常谈的话题了，两者都是对大量频繁重复调用代码的一种优化方案<br>今天在某群和大家讨论时，顺便搜了一些相关博客<br>发现有一篇关于两者的定义竟然写反了。。。所以决定自己来写一下-.-权当加深记忆了</p>
</blockquote>
<a id="more"></a>
<h2 id="函数节流（throttle）"><a href="#函数节流（throttle）" class="headerlink" title="函数节流（throttle）"></a>函数节流（throttle）</h2><blockquote>
<p>正如其命名的含义，节流。<br>限制函数在一定时间内调用的次数。</p>
</blockquote>
<h3 id="类似的实际生活中的场景"><a href="#类似的实际生活中的场景" class="headerlink" title="类似的实际生活中的场景"></a>类似的实际生活中的场景</h3><p>早晚高峰的地铁排队。<br><img src="/img/jarvis/function-throttle-debounce/debounce-pic1.jpg" alt="早高峰的地铁站"><br>太多的人拥挤到站台上，大家都想搭上这班车，人挤人之间，难免会出现一些问题。<br>所以在很多地铁站，高峰期会设置很多层的屏障，来增加你进站的时间，从而减少站台的压力。<br><img src="/img/jarvis/function-throttle-debounce/debounce-pic2.jpeg" alt="节流的实践"></p>
<h3 id="在程序中的实践"><a href="#在程序中的实践" class="headerlink" title="在程序中的实践"></a>在程序中的实践</h3><p>同理，代入程序中，我们可以通过限制函数调用的频率，来抑制资源的消耗。<br>比如我们要实现一个元素拖拽的效果，我们是可以在每次<code>move</code>事件中都进行重绘DOM，但是这样做，程序的开销是非常大的。<br>所以在这里我们可以用到<code>函数节流</code>的方法，来减少重绘的次数：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 普通方案</span>
$dragable<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'trigger'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 函数节流的实现方案</span>
<span class="token keyword">let</span> throttleIdentify <span class="token operator">=</span> <span class="token number">0</span>
$dragable<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>throttleIdentify<span class="token punctuation">)</span> <span class="token keyword">return</span>
  throttleIdentify <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> throttleIdentify <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'trigger'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>这样来做的话，在拖动的过程中，能保证500ms内，只会重绘一次DOM。<br>在同时监听了<code>mouseover</code>后，两者最终的效果是一致的，但是在拖动的过程中，<code>函数节流</code>版触发事件的次数会减少很多，遂消耗更少的资源。</p>
<h3 id="通用的函数节流实现"><a href="#通用的函数节流实现" class="headerlink" title="通用的函数节流实现"></a>通用的函数节流实现</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/**
 * 函数节流的实现
 * @param  {Function} func      要实现函数节流的原函数
 * @param  {Number}   interval  节流的间隔
 * @return {Function}           添加节流功能的函数
 */</span>
<span class="token keyword">function</span> throttle <span class="token punctuation">(</span>func<span class="token punctuation">,</span> interval<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> identify <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>identify<span class="token punctuation">)</span> <span class="token keyword">return</span>
    identify <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> identify <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span>
    func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="类似函数节流的操作"><a href="#类似函数节流的操作" class="headerlink" title="类似函数节流的操作"></a>类似函数节流的操作</h3><p>平时开发中经常会做的<code>ajax</code>请求获取数据，这里可以用到类似函数节流的操作。<br>在我们发送一个请求到后台时，当返回的数据还没有接收到时，我们会添加一个标识，来表明当前有一个请求正在被处理，如果这时用户再触发<code>ajax</code>请求，则会直接跳过本次函数的执行。<br>同样的还有滑动加载更多数据，如果不添加类似的限制，可能会导致发送多条请求，渲染重复数据。</p>
<hr>
<p>我曾经在某软件里遇到过-.-连续点击登录按钮数十次，结果连着给我弹了三次密码错误，随后告诉我输入密码错误超过三次，您的账号已被锁定。<br><img src="/img/jarvis/function-throttle-debounce/debounce-pic3.jpeg" alt="黑人问号脸"></p>
<p>函数节流的定义：<strong>限制函数在一定时间内调用的次数</strong></p>
<h2 id="函数防抖（debounce）"><a href="#函数防抖（debounce）" class="headerlink" title="函数防抖（debounce）"></a>函数防抖（debounce）</h2><blockquote>
<p>是函数在特定的时间内不被再调用后执行。</p>
</blockquote>
<h3 id="实际的例子"><a href="#实际的例子" class="headerlink" title="实际的例子"></a>实际的例子</h3><p>还是拿城市交通工具来说事儿。。<br>坐公交时，到站了，是由司机来操作车门的开合的。<br>当司机准备离站时，关闭车门，这是突然跑过来一人，司机只好再将车门打开，让人上来。</p>
<p>又或者，乘坐升降电梯时，电梯门关闭后，外边跑来一人又将电梯门按开。<br>这两件事儿都是因为<code>关门</code>这一个事件<strong>处理太快</strong>导致的，徒增一次开关门的消耗。</p>
<h3 id="在程序中的实践-1"><a href="#在程序中的实践-1" class="headerlink" title="在程序中的实践"></a>在程序中的实践</h3><h4 id="监听窗口大小重绘的操作。"><a href="#监听窗口大小重绘的操作。" class="headerlink" title="监听窗口大小重绘的操作。"></a>监听窗口大小重绘的操作。</h4><p>在用户拖拽窗口时，一直在改变窗口的大小，如果我们在<code>resize</code>事件中进行一些操作，消耗将是巨大的。<br>而且大多数可能是无意义的执行，因为用户还处于拖拽的过程中。<br>所以我们可以用<code>函数防抖</code>来优化相关的处理</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 普通方案</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'trigger'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 函数防抖方案</span>
<span class="token keyword">let</span> debounceIdentify <span class="token operator">=</span> <span class="token number">0</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  debounceIdentify <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>debounceIdentify<span class="token punctuation">)</span>
  debounceIdentify <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'trigger'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>我们在<code>resize</code>事件中添加了一个300ms的延迟执行逻辑。<br>并且在每次事件触发时，都会重新计时，这样做也就可以保证，函数的执行肯定是在距离上次<code>resize</code>事件被触发的300ms后。<br>两次<code>resize</code>事件间隔小于300ms的都会被忽略，这样就节省了很多无意义的事件触发。</p>
<h4 id="输入框的输入联想"><a href="#输入框的输入联想" class="headerlink" title="输入框的输入联想"></a>输入框的输入联想</h4><p>几乎所有的搜索引擎都会对你输入的文字进行预判，并在下方推荐相关的结果。<br>但是这个联想意味着我们需要将当前用户所输入的文本传递到后端，并获取返回数据，展示在页面中。<br>如果遇到打字速度快的人，比如<em>260字母/分钟</em>的我，在一小段时间内，会连续发送大量的<code>ajax</code>请求到后端。<br>并且当前边的数据返回过来后，其实已经失去了展示的意义，因为用户可能从<code>you</code>输入到了<code>young</code>，这两个单词相关的结果肯定是不一样的。<br>所以我们就可以在监听用户输入的事件那里做函数防抖的处理，在XXX秒后发送联想搜索的<code>ajax</code>请求。</p>
<h3 id="通用的函数防抖实现"><a href="#通用的函数防抖实现" class="headerlink" title="通用的函数防抖实现"></a>通用的函数防抖实现</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/**
 * 函数防抖的实现
 * @param  {Function} func   要实现函数节流的原函数
 * @param  {Number}   delay  结束的延迟时间
 * @return {Function}        添加节流功能的函数
 */</span>
<span class="token keyword">function</span> debounce <span class="token punctuation">(</span>func<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> debounceIdentify <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    debounceIdentify <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>debounceIdentify<span class="token punctuation">)</span>
    debounceIdentify <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      debounceIdentify <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment" spellcheck="true">// clear timer flag</span>
      func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="类似函数防抖的操作"><a href="#类似函数防抖的操作" class="headerlink" title="类似函数防抖的操作"></a>类似函数防抖的操作</h3><p>在一些与用户的交互上，比如提交表单后，一般都会显示一个loading框来提示用户，他提交的表单正在处理中。<br>但是发送表单请求后就显示loading是一件很不友好的事情，因为请求可能在几十毫秒内就会得到响应。<br>这样在用户看来就是页面中闪过一团黑色，所以可以在提交表单后添加一个延迟函数，在XXX秒后再显示loading框。<br>这样在快速响应的场景下，用户是不会看到一闪而过的loading框，当然，一定要记得在接收到数据后去<code>clearTimeout</code></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> identify <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>showLoadingModal<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'XXX'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// doing something</span>

  <span class="token comment" spellcheck="true">// clear timer</span>
  <span class="token function">clearTimeout</span><span class="token punctuation">(</span>identify<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>函数防抖的定义：<strong>函数在特定的时间内不被再调用后执行</strong></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>函数节流、函数防抖<br>两者都是用来解决代码短时间内大量重复调用的方案。<br>当然，也是各有利弊。<br>在实际开发中，两者的界定也很模糊。<br>比如搜索关键字联想，用节流或者防抖都可以来做，拖拽DOM、监听resize等等，这两个都是可以来实现的。</p>
<p>两者的区别在于：<br>函数节流在一定时间内肯定会触发多次，但是最后不一定会触发<br>函数防抖可能仅在最后触发一次</p>
<p>记住上边这两句，我觉得遇到类似需要进行优化的场景，应该就能够知道该用哪个了。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li><a href="https://ict.ken.be/javascript-debounce-vs-throttle-function" target="_blank" rel="noopener">Javascript debounce vs throttle function</a></li>
<li><a href="https://gist.github.com/7885923" target="_blank" rel="noopener">Javascript function debounce and throttle</a></li>
</ol>

    

    
</div>


                

                <!-- Post Comments -->
                
                    




    <!-- 使用 DISQUS -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'http://web.blued.cn/2018/03/10/函数节流与函数防抖/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://web.blued.cn/2018/03/10/函数节流与函数防抖/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    queue.offer(function() {
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//bluedweb.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>




                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/04/30/面对有2亿条数据的mysql表/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/12/15/ios-fixed-input-cursor-position/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
  <!-- Top bar -->
  <div class="top-bar"></div>

  <!-- Sidebar toggle button -->
  <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
    <i class="material-icons">clear_all</i>
    <span class="mdl-button__ripple-container">
      <span class="mdl-ripple"></span>
    </span>
  </button>

  <!-- Sidebar Avatar -->
  <div class="sidebar-image">
    <img src="/img/avatar.png" alt="Blued's avatar">
  </div>

  <!-- Sidebar Email -->
  <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
    web@blued.com
    <b class="caret"></b>
  </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:web@blued.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/bluedapp" target="_blank" title="GitHub">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">home</i>
                        
                        GitHub
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/04/">四月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/01/">一月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">十月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/blued" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.svg);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/bluedapp" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.svg);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    

    <!-- Weibo -->
    
        <a href="http://weibo.com/bluedapp" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-weibo.svg);">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    
        <a href="https://instagram.com/bluedapp" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-instagram.svg);">
                <span class="visuallyhidden">Instagram</span>
            </button><!--
     --></a>
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/bluedapp" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.svg);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;BluedWeb
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>












    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//bluedweb.disqus.com/count.js" async></script>





<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script>
    <!-- Offer LazyLoad -->
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    <!-- Start Queue -->
    $(document).ready(function(){
        setTimeout(function(){
            setInterval(function(){
                queue.execNext();
            },200);
        },3000);
    });
</script>

                </main>
            </div>
        </body>
    
</html>
